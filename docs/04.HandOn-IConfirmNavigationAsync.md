# 画面遷移時の確認ダイアログロジックをViewModelに実装する

16. MainPageViewModelにIConfirmNavigationAwareインターフェースを追加  
17. 上記インターフェースのメソッド３つを実装し、OnNavigatedFromとOnNavigatedToは空実装に、CanNavigateAsyncは例外をスローするようにしておく  
18. IPageDialogServiceをMainPageViewModelのコンストラクタでインジェクションし、フィールドに保持しておく  
19. MainPageViewModelTestのExecuteNavigationCommandテストメソッドでIPageDialogServiceのモックをコンストラクタへインジェクションする  
-> テストを実行 -> 成功（壊していないことを確認する）  
20. MainPageViewModelTestにNaivateToTextSpeechPageWhenPressedOkテストメソッドを追加しテストコードの追加  
-> テストを実行 -> エラー
21. MainPageViewModelTestにNaivateToTextSpeechPageWhenPressedCancelテストメソッドを追加しテストコードの追加  
-> テストを実行 -> エラー  
22. MainPageViewModelのCanNavigateAsyncでダイアログの実装  
-> テストを実行 -> 成功  
-> デバッグ実行 -> 確認ダイアログが正しく動作することを確認する  
